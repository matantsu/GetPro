{
  "rules": {
    "users": {
      "$uid": {
        ".validate": "newData.hasChildren(['displayName', 'photoURL'])",
        "displayName": {
          ".validate": "newData.isString()"
        },
        "photoURL": {
          ".validate": "newData.isString()"
        },
        "phone": {
          ".validate": "newData.isString()"
        },
        "address": {
          ".validate": "newData.isString()"
        },
        "$other": {
          ".validate": "false"
        },
        ".read": "true",
        ".write": "auth != null && auth.uid == $uid"
      }
    },
    "jobs": {
      "$jobId": {
        ".validate": "newData.hasChildren(['type', 'desc'])",
        "chosen": {
          ".validate": "newData.isString()"
        },
        "locked": {
          ".validate": "newData.isString()"
        },
        "type": {
          ".validate": "newData.isString()"
        },
        "desc": {
          ".validate": "newData.isString()"
        },
        "$other": {
          ".validate": "false"
        },
        ".write": "data.val() == null && auth != null || data.val() != null && newData.val() != null && (auth != null && newData.parent().parent().child('owner_to_jobs').child(auth.uid).child('hasChild')($jobId)) || data.val() != null && newData.val() == null && (auth != null && newData.parent().parent().child('owner_to_jobs').child(auth.uid).child('hasChild')($jobId))",
        ".read": "true"
      }
    },
    "bids": {
      "$jobId": {
        ".read": "auth != null && root.child('owner_to_jobs').child(auth.uid).child('hasChild')($jobId)",
        "$uid": {
          ".validate": "newData.hasChildren(['price'])",
          "payed": {
            ".validate": "newData.isBoolean()"
          },
          "price": {
            ".validate": "newData.isNumber()"
          },
          "$other": {
            ".validate": "false"
          },
          ".read": "auth != null && auth.uid == $uid",
          ".write": "newData.parent().parent().parent().child('jobs').child($jobId).val() == true && !(newData.parent().parent().parent().child('jobs').child($jobId).child('locked').val() == true)"
        }
      }
    },
    "owner_to_jobs": {
      "$uid": {
        ".read": "auth != null && auth.uid == $uid"
      }
    },
    "job_to_owner": {
      ".read": "true"
    }
  }
}
